
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JavaScript模块加载器—duckJS简介</title>
    
    <meta name="author" content="柳裟">
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <link href="/assets/themes/twitter/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
      <link href="/assets/themes/twitter/stylesheets/gfm.css" media="screen, projection" rel="stylesheet" type="text/css">
      <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
      <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
      <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>

    <!-- start -->
    <div class="container">
        <div class="left-col">
            <div class="intrude-less">
                <header id="header" class="inner">
                    <div class="profilepic">
                        <img src='https://0.gravatar.com/avatar/372a13c579567ea98cafb3030289b63d?d=https%3A%2F%2Fidenticons.github.com%2Fffce3aba86b100da21f2295272398204.png&s=160' alt='Profile Picture' style='width: 160px;'>
                    </div>
                    <h1><a href="/">将材柳裟</a></h1>
                    <p class="subtitle"></p>
                    <nav id="main-nav">
                        <ul class="main">
                            <li><a href="/">博客</a></li>
                            <li><a href="/archive.html">文章列表</a></li>
                            <li><a href="/lab.html">实验室</a></li>
                        </ul>

                        <section class="aboutme">
                            <p>
                                Hi，我是柳裟，我目前在杭州，主要做前端开发的工作，兴趣于Web开发技术，这是我的博客，所记载偏技术，但可灵感可生活，喜欢和聪明的人打交道。
                            </p>
                        </section>
                    </nav>
                    <nav id="sub-nav">
                        <div class="social">
                            <a class="twitter" href="" title="暂时没有">Twitter</a>
                            <a class="github" href="https://github.com/superRaytin" title="GitHub">GitHub</a>
                            <a class="rss" href="/rss.xml" title="RSS">RSS</a>
                        </div>
                    </nav>
                </header>
            </div>
        </div>

        <div class="mid-col">
            <div class="mid-col-container">
                <div id="content" class="inner">
                        
<article class="post">
    <div class="meta">
        <div class="date">
            <time datetime='' data-updated="true" itemprop="datePublished">2013-02-22</time>
        </div>
        
    </div>
    <h1 class="title">JavaScript模块加载器—duckJS简介</h1>
    <div class="entry markdown-body">
        <h3>duckJS是什么</h3>

<p>一款JavaScript模块加载器;</p>

<p>在遵循AMD规范的基础上，作了一些更加方便的改进，支持定义匿名模块。</p>

<p>这样在调用模块的时候只需关心模块的URL，而不需要知道模块名称。</p>

<h3>如何使用duckJS</h3>

<p>轻松两步便可使用，举个栗子~</p>

<pre><code>&lt;script type="text/javascript" src="path/duck.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
    D.config({
        alias : {
            'jquery' : 'gallery/jquery-v1.7.2.min.js',
            'style' : 'css/style.css'
        }
    });
&lt;/script&gt;
</code></pre>

<h3>define 定义模块</h3>

<pre><code>// test.js
define( ['jquery'], function($){
    D.log('模块已加载');
    var fn = {
        get : function(){ return 'i am a get method'; },
        set : function( id, text ){
            document.getElementById(id).value = text;
            $('#test').html('');
        }
    };
    return fn;
});
</code></pre>

<p>define是一个全局方法，每一个参数为一个数组，表示此模块的依赖列表，也可以是一个字符串，表示只有一个依赖。</p>

<p>也可以忽略第一个参数，直接定义一个无依赖的匿名模块。</p>

<h3>use 调用模块</h3>

<pre><code>&lt;script type="text/javascript"&gt;
    // 加载一个样式文件
    D.use('style');

    D.use(['test','jquery'],function(test,$){
        // your code...
    });
    ... more code of yours ...
&lt;/script&gt;
</code></pre>

<p>解析模块路径将优先从用户设置的config里读取，如果模块未在config里设置，才会对test启动解析过程，比如test模块url最后会被解析为path/test.js，第二个参数是模块加载完成之后的回调，参数依次为依赖模块的输出，即exports。</p>

<h3>预加载</h3>

<pre><code>&lt;script type="text/javascript" src="path/duck.js" data-main="gallery/jquery-v1.7.2.min.js, path/test.js" /&gt;
</code></pre>

<p>在duckJS对应的script标签设置data-main属性，将会对其中的模块进行预加载（即随着页面初始时一起加载），多个模块用逗号隔开，此时模块相对路径为duckJS的路径，如果模块URL以‘/’开始，则相对于页面根路径。其原理相当于页面一加载即开始运行下面这段代码：</p>

<pre><code>duckJS.use(['gallery/jquery-v1.7.2.min.js', 'path/test.js'])
</code></pre>

<h3>支持的浏览器</h3>

<p>支持IE6+，及其他现代浏览器。</p>

<p>GitHub地址：<a href="https://github.com/superRaytin/duckJS">https://github.com/superRaytin/duckJS</a>   欢迎Fork。</p>

    </div>
</article>

<nav id="pagenavi">
    <a href="/skill/2013/04/05/duckjs-jia-gou-xiang-jie" class="next">Next</a>
    <div class="center"><a href="/archive.html">Blog Archives</a></div>
</nav>

<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-title="JavaScript模块加载器—duckJS简介" data-source-thread-id="/skill/2013/02/22/javascript-mo-kuai-jia-zai-qi-duckjs" data-url="/skill/2013/02/22/javascript-mo-kuai-jia-zai-qi-duckjs"></div>
<script type="text/javascript">
    var duoshuoQuery = {short_name:"raytinblog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- Duoshuo Comment END -->

<!--
<script type="text/javascript" charset="utf-8">
    var disqus_url = "http://superraytin.github.com/skill/2013/02/22/javascript-mo-kuai-jia-zai-qi-duckjs";
</script>

<!--
<p>
    <span class="showComment" id="J-showComment">comments ↓</span>
</p>
<div id="disqus_thread" class="height0"></div>
-->
<!--
<div id="disqus_thread" class="mt20"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'raytinspace'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->

                    <!--
                    <nav id="pagenavi">
                        <a href="/blog/page/2/" class="next">Next</a>
                        <div class="center"><a href="/blog/archives">Blog Archives</a></div>
                    </nav>
                    -->
                </div>
            </div>
            <footer id="footer" class="inner">
                Copyright &copy; 2013 superRaytin
                Powered by <a href="http://jekyllbootstrap.com">Jekyll</a>
                Design from <a href="http://shashankmehta.in/archive/2012/greyshade.html">Greyshade</a>
            </footer>
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
            <script src="/assets/themes/twitter/javascripts/jquery.lazyload.min.js"></script>
            <script src="/assets/themes/twitter/javascripts/common.js"></script>
        </div>
    </div>
    <!-- end -->
    
  </body>
</html>
