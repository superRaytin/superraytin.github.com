
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Javascript在浏览器端生成文件并打包创建zip</title>
    
    <meta name="author" content="柳裟">
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <link href="/assets/themes/twitter/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
      <link href="/assets/themes/twitter/stylesheets/gfm.css" media="screen, projection" rel="stylesheet" type="text/css">
      <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
      <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
      <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>

    <!-- start -->
    <div class="container">
        <div class="left-col">
            <div class="intrude-less">
                <header id="header" class="inner">
                    <div class="profilepic">
                        <img src='https://0.gravatar.com/avatar/372a13c579567ea98cafb3030289b63d?d=https%3A%2F%2Fidenticons.github.com%2Fffce3aba86b100da21f2295272398204.png&s=160' alt='Profile Picture' style='width: 160px;'>
                    </div>
                    <h1><a href="/">将材柳裟</a></h1>
                    <p class="subtitle"></p>
                    <nav id="main-nav">
                        <ul class="main">
                            <li><a href="/">博客</a></li>
                            <li><a href="/archive.html">文章列表</a></li>
                            <li><a href="/lab.html">实验室</a></li>
                        </ul>

                        <section class="aboutme">
                            <p>
                                Hi，我是柳裟，我目前在杭州，主要做前端开发的工作，兴趣于Web开发技术，这是我的博客，所记载偏技术，但可灵感可生活，喜欢和聪明的人打交道。
                            </p>
                        </section>
                    </nav>
                    <nav id="sub-nav">
                        <div class="social">
                            <a class="twitter" href="" title="暂时没有">Twitter</a>
                            <a class="github" href="https://github.com/superRaytin" title="GitHub">GitHub</a>
                            <a class="rss" href="/rss.xml" title="RSS">RSS</a>
                        </div>
                    </nav>
                </header>
            </div>
        </div>

        <div class="mid-col">
            <div class="mid-col-container">
                <div id="content" class="inner">
                        
<article class="post">
    <div class="meta">
        <div class="date">
            <time datetime='' data-updated="true" itemprop="datePublished">2014-04-30</time>
        </div>
        
        <div class="tags">
            
            


  
     
    	<a class="category" href="/tags.html#Javascript-ref">Javascript</a>&nbsp;
    
  



        </div>
        
    </div>
    <h1 class="title">Javascript在浏览器端生成文件并打包创建zip</h1>
    <div class="entry markdown-body">
        <p>偶然看到一项目，创建文件（文本or图片）然后打包成zip文件提供给用户下载，所有操作都是在浏览器端完成，反复测试，既不是利用HTML5新特性也不需要额外插件，
也没有发出请求，甚至支持到IE8，震惊了有木有， 那是怎么做到的？一探究竟发现还是浏览器那些东西，感叹， 你以为已经很懂浏览器，其实不然;
如果浏览器是一条河，很多时候也只是在河边打湿了鞋就着急上了岸。</p>

<p>项目为叫JSZip，下面是官网的示例，用法简洁，我在其中增加了中文注释：</p>

<pre><code>var zip = new JSZip();

// 创建一个文本文件，内容为hello World
zip.file("Hello.txt", "Hello World\n");

// 创建一个images的文件夹
var img = zip.folder("images");

// 创建一个图片文件
img.file("smile.gif", imgData, {base64: true});

// 生成blob大对象
var content = zip.generate({type:"blob"});

// 打包保存为example.zip
saveAs(content, "example.zip");

/*
example.zip包含以下文件
Hello.txt
images/
    smile.gif
*/
</code></pre>

<p>附上项目地址：<a href="https://github.com/Stuk/jszip">https://github.com/Stuk/jszip</a></p>

    </div>
</article>

<nav id="pagenavi">
    <a href="" class="next">Next</a>
    <div class="center"><a href="/archive.html">Blog Archives</a></div>
</nav>

<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
    var duoshuoQuery = {short_name:"raytinblog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- Duoshuo Comment END -->

<!--
<script type="text/javascript" charset="utf-8">
    var disqus_url = "http://superraytin.github.com/skill/2014/04/30/browser-create-zip";
</script>

<!--
<p>
    <span class="showComment" id="J-showComment">comments ↓</span>
</p>
<div id="disqus_thread" class="height0"></div>
-->
<!--
<div id="disqus_thread" class="mt20"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'raytinspace'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->

                    <!--
                    <nav id="pagenavi">
                        <a href="/blog/page/2/" class="next">Next</a>
                        <div class="center"><a href="/blog/archives">Blog Archives</a></div>
                    </nav>
                    -->
                </div>
            </div>
            <footer id="footer" class="inner">
                Copyright &copy; 2013 superRaytin
                Powered by <a href="http://jekyllbootstrap.com">Jekyll</a>
                Design from <a href="http://shashankmehta.in/archive/2012/greyshade.html">Greyshade</a>
            </footer>
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
            <script src="/assets/themes/twitter/javascripts/jquery.lazyload.min.js"></script>
            <script src="/assets/themes/twitter/javascripts/common.js"></script>
        </div>
    </div>
    <!-- end -->
    
  </body>
</html>
